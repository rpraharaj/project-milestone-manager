<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gantt View - IT Project Timeline Tracker</title>
    <link rel="stylesheet" href="../css/main.css">
</head>
<body class="bg-background min-h-screen">
    <!-- Global Header Navigation -->
    <header class="bg-surface border-b border-light shadow-card fixed top-0 left-0 right-0 z-50">
        <div class="max-w-7xl mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <!-- Logo -->
                <div class="flex items-center space-x-3">
                    <svg class="w-8 h-8 text-primary" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 2L2 7v10c0 5.55 3.84 9.74 9 11 5.16-1.26 9-5.45 9-11V7l-10-5z"/>
                        <path d="M9 12l2 2 4-4" stroke="white" stroke-width="2" fill="none"/>
                    </svg>
                    <h1 class="text-xl font-semibold text-text-primary">IT Project Timeline Tracker</h1>
                </div>

                <!-- Desktop Navigation -->
                <nav class="hidden md:flex items-center space-x-8">
                    <a href="dashboard.html" class="text-text-secondary hover:text-primary transition-fast">Dashboard</a>
                    <a href="capabilities_management.html" class="text-text-secondary hover:text-primary transition-fast">Capabilities</a>
                    <a href="gantt_view.html" class="text-primary font-medium border-b-2 border-primary pb-1">Plans</a>
                    <a href="milestone_management.html" class="text-text-secondary hover:text-primary transition-fast">Milestone Management</a>
                </nav>

                <!-- Mobile Menu Button -->
                <button class="md:hidden p-2 rounded-lg hover:bg-secondary-100 transition-fast" id="mobileMenuBtn">
                    <svg class="w-6 h-6 text-text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                    </svg>
                </button>
            </div>

            <!-- Mobile Navigation Menu -->
            <div class="md:hidden mt-4 pb-4 border-t border-light hidden" id="mobileMenu">
                <nav class="flex flex-col space-y-3 pt-4">
                    <a href="dashboard.html" class="text-text-secondary hover:text-primary transition-fast px-2 py-1">Dashboard</a>
                    <a href="capabilities_management.html" class="text-text-secondary hover:text-primary transition-fast px-2 py-1">Capabilities</a>
                    <a href="gantt_view.html" class="text-primary font-medium px-2 py-1">Plans</a>
                    <a href="milestone_management.html" class="text-text-secondary hover:text-primary transition-fast px-2 py-1">Milestone Management</a>
                </nav>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="pt-20 px-6 max-w-full">
        <!-- Page Header -->
        <div class="mb-6">
            <div class="flex items-center justify-between">
                <div>
                    <h2 class="text-3xl font-semibold text-text-primary mb-2">Gantt View</h2>
                    <p class="text-text-secondary">Visual timeline representation of all capabilities and their delivery plans</p>
                </div>
                
                <!-- Toolbar Controls -->
                <div class="flex items-center space-x-4">
                    <button class="btn-secondary text-sm" id="refreshBtn">
                        <svg class="w-4 h-4 mr-2 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
                        </svg>
                        Refresh Data
                    </button>
                    <button class="btn-secondary text-sm" id="exportBtn">
                        <svg class="w-4 h-4 mr-2 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                        </svg>
                        Export
                    </button>
                    <a href="plan_creation.html" class="btn-primary text-sm">
                        <svg class="w-4 h-4 mr-2 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/>
                        </svg>
                        Create Plan
                    </a>
                </div>
            </div>
        </div>

        <!-- Filters and View Controls -->
        <div class="card p-4 mb-6">
            <div class="flex flex-wrap items-center justify-between gap-4">
                <!-- Left Side Filters -->
                <div class="flex flex-wrap items-center gap-4">
                    <div class="flex items-center space-x-2">
                        <label class="text-sm font-medium text-text-primary">Workstream:</label>
                        <select class="input-field text-sm" id="workstreamFilter">
                            <option value="">All Workstreams</option>
                            <option value="frontend">Frontend Development</option>
                            <option value="backend">Backend Services</option>
                            <option value="data">Data & Analytics</option>
                            <option value="security">Security & Compliance</option>
                            <option value="infrastructure">Infrastructure</option>
                        </select>
                    </div>
                    
                    <div class="flex items-center space-x-2">
                        <label class="text-sm font-medium text-text-primary">Status:</label>
                        <select class="input-field text-sm" id="statusFilter">
                            <option value="">All Status</option>
                            <option value="not-started">Not Started</option>
                            <option value="in-progress">In Progress</option>
                            <option value="completed">Completed</option>
                            <option value="on-hold">On Hold</option>
                        </select>
                    </div>

                    <div class="flex items-center space-x-2">
                        <label class="text-sm font-medium text-text-primary">Date Range:</label>
                        <select class="input-field text-sm" id="dateRangeFilter">
                            <option value="current-quarter">Current Quarter</option>
                            <option value="next-quarter">Next Quarter</option>
                            <option value="current-year">Current Year</option>
                            <option value="custom">Custom Range</option>
                        </select>
                    </div>
                </div>

                <!-- Right Side View Controls -->
                <div class="flex items-center space-x-4">
                    <div class="flex items-center space-x-2">
                        <label class="text-sm font-medium text-text-primary">View:</label>
                        <div class="flex bg-secondary-100 rounded-lg p-1">
                            <button class="px-3 py-1 text-sm rounded bg-primary text-white transition-fast" id="weekView">Weeks</button>
                            <button class="px-3 py-1 text-sm rounded text-text-secondary hover:text-primary transition-fast" id="monthView">Months</button>
                            <button class="px-3 py-1 text-sm rounded text-text-secondary hover:text-primary transition-fast" id="quarterView">Quarters</button>
                        </div>
                    </div>

                    <div class="flex items-center space-x-2">
                        <button class="p-2 rounded-lg hover:bg-secondary-100 transition-fast" id="zoomOut" title="Zoom Out">
                            <svg class="w-4 h-4 text-text-secondary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM13 10H7"/>
                            </svg>
                        </button>
                        <button class="p-2 rounded-lg hover:bg-secondary-100 transition-fast" id="zoomIn" title="Zoom In">
                            <svg class="w-4 h-4 text-text-secondary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Gantt Chart Container -->
        <div class="card overflow-hidden">
            <div class="grid grid-cols-12 min-h-screen">
                <!-- Left Panel - Capability List (3 cols) -->
                <div class="col-span-12 lg:col-span-3 border-r border-light bg-secondary-50">
                    <!-- Capability List Header -->
                    <div class="p-4 border-b border-light bg-surface">
                        <h3 class="font-semibold text-text-primary">Capabilities</h3>
                        <p class="text-sm text-text-secondary mt-1">47 total capabilities</p>
                    </div>

                    <!-- Capability List -->
                    <div class="overflow-y-auto" style="max-height: calc(100vh - 200px);">
                        <!-- Capability Item 1 -->
                        <div class="p-4 border-b border-light hover:bg-surface transition-fast cursor-pointer capability-row" data-capability="customer-portal">
                            <div class="flex items-center justify-between mb-2">
                                <h4 class="font-medium text-text-primary text-sm">Customer Portal Enhancement</h4>
                                <span class="status-warning px-2 py-1 rounded text-xs font-medium">In Progress</span>
                            </div>
                            <div class="space-y-1">
                                <p class="text-xs text-text-secondary">
                                    <span class="font-medium">Lead:</span> Sarah Chen
                                </p>
                                <p class="text-xs text-text-secondary">
                                    <span class="font-medium">Workstream:</span> Frontend Development
                                </p>
                                <div class="flex items-center space-x-2 mt-2">
                                    <div class="w-2 h-2 bg-primary rounded-full" title="Development Phase"></div>
                                    <span class="text-xs text-text-secondary">Development - 65% complete</span>
                                </div>
                            </div>
                        </div>

                        <!-- Capability Item 2 -->
                        <div class="p-4 border-b border-light hover:bg-surface transition-fast cursor-pointer capability-row" data-capability="api-integration">
                            <div class="flex items-center justify-between mb-2">
                                <h4 class="font-medium text-text-primary text-sm">API Integration Framework</h4>
                                <span class="status-warning px-2 py-1 rounded text-xs font-medium">At Risk</span>
                            </div>
                            <div class="space-y-1">
                                <p class="text-xs text-text-secondary">
                                    <span class="font-medium">Lead:</span> Michael Rodriguez
                                </p>
                                <p class="text-xs text-text-secondary">
                                    <span class="font-medium">Workstream:</span> Backend Services
                                </p>
                                <div class="flex items-center space-x-2 mt-2">
                                    <div class="w-2 h-2 bg-warning rounded-full" title="UAT Phase"></div>
                                    <span class="text-xs text-text-secondary">UAT - 30% complete</span>
                                </div>
                            </div>
                        </div>

                        <!-- Capability Item 3 -->
                        <div class="p-4 border-b border-light hover:bg-surface transition-fast cursor-pointer capability-row" data-capability="data-migration">
                            <div class="flex items-center justify-between mb-2">
                                <h4 class="font-medium text-text-primary text-sm">Data Migration Engine</h4>
                                <span class="status-success px-2 py-1 rounded text-xs font-medium">On Track</span>
                            </div>
                            <div class="space-y-1">
                                <p class="text-xs text-text-secondary">
                                    <span class="font-medium">Lead:</span> Jennifer Liu
                                </p>
                                <p class="text-xs text-text-secondary">
                                    <span class="font-medium">Workstream:</span> Data & Analytics
                                </p>
                                <div class="flex items-center space-x-2 mt-2">
                                    <div class="w-2 h-2 bg-secondary-400 rounded-full" title="Design Phase"></div>
                                    <span class="text-xs text-text-secondary">Design - 45% complete</span>
                                </div>
                            </div>
                        </div>

                        <!-- Capability Item 4 -->
                        <div class="p-4 border-b border-light hover:bg-surface transition-fast cursor-pointer capability-row" data-capability="security-framework">
                            <div class="flex items-center justify-between mb-2">
                                <h4 class="font-medium text-text-primary text-sm">Security Framework</h4>
                                <span class="status-success px-2 py-1 rounded text-xs font-medium">On Track</span>
                            </div>
                            <div class="space-y-1">
                                <p class="text-xs text-text-secondary">
                                    <span class="font-medium">Lead:</span> David Park
                                </p>
                                <p class="text-xs text-text-secondary">
                                    <span class="font-medium">Workstream:</span> Security & Compliance
                                </p>
                                <div class="flex items-center space-x-2 mt-2">
                                    <div class="w-2 h-2 bg-secondary-300 rounded-full" title="Requirements Phase"></div>
                                    <span class="text-xs text-text-secondary">Requirements - 80% complete</span>
                                </div>
                            </div>
                        </div>

                        <!-- Capability Item 5 -->
                        <div class="p-4 border-b border-light hover:bg-surface transition-fast cursor-pointer capability-row" data-capability="notification-system">
                            <div class="flex items-center justify-between mb-2">
                                <h4 class="font-medium text-text-primary text-sm">Notification System</h4>
                                <span class="status-error px-2 py-1 rounded text-xs font-medium">Delayed</span>
                            </div>
                            <div class="space-y-1">
                                <p class="text-xs text-text-secondary">
                                    <span class="font-medium">Lead:</span> Emma Thompson
                                </p>
                                <p class="text-xs text-text-secondary">
                                    <span class="font-medium">Workstream:</span> Backend Services
                                </p>
                                <div class="flex items-center space-x-2 mt-2">
                                    <div class="w-2 h-2 bg-accent rounded-full" title="CST Phase"></div>
                                    <span class="text-xs text-text-secondary">CST - 15% complete</span>
                                </div>
                            </div>
                        </div>

                        <!-- Capability Item 6 -->
                        <div class="p-4 border-b border-light hover:bg-surface transition-fast cursor-pointer capability-row" data-capability="reporting-dashboard">
                            <div class="flex items-center justify-between mb-2">
                                <h4 class="font-medium text-text-primary text-sm">Reporting Dashboard</h4>
                                <span class="status-success px-2 py-1 rounded text-xs font-medium">Completed</span>
                            </div>
                            <div class="space-y-1">
                                <p class="text-xs text-text-secondary">
                                    <span class="font-medium">Lead:</span> Alex Johnson
                                </p>
                                <p class="text-xs text-text-secondary">
                                    <span class="font-medium">Workstream:</span> Data & Analytics
                                </p>
                                <div class="flex items-center space-x-2 mt-2">
                                    <div class="w-2 h-2 bg-accent rounded-full" title="Completed"></div>
                                    <span class="text-xs text-text-secondary">Completed - 100%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right Panel - Gantt Chart (9 cols) -->
                <div class="col-span-12 lg:col-span-9 bg-surface">
                    <!-- Timeline Header -->
                    <div class="p-4 border-b border-light">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="font-semibold text-text-primary">Timeline View</h3>
                            <div class="flex items-center space-x-2 text-sm text-text-secondary">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                                </svg>
                                <span>January 2025</span>
                            </div>
                        </div>

                        <!-- Week Headers -->
                        <div class="grid grid-cols-8 gap-2 text-xs text-text-secondary font-medium">
                            <div class="text-center py-2">Week 1</div>
                            <div class="text-center py-2">Week 2</div>
                            <div class="text-center py-2">Week 3</div>
                            <div class="text-center py-2">Week 4</div>
                            <div class="text-center py-2">Week 5</div>
                            <div class="text-center py-2">Week 6</div>
                            <div class="text-center py-2">Week 7</div>
                            <div class="text-center py-2">Week 8</div>
                        </div>

                        <!-- Date Headers -->
                        <div class="grid grid-cols-8 gap-2 text-xs text-text-secondary mt-1">
                            <div class="text-center">Jan 6-12</div>
                            <div class="text-center">Jan 13-19</div>
                            <div class="text-center">Jan 20-26</div>
                            <div class="text-center">Jan 27-Feb 2</div>
                            <div class="text-center">Feb 3-9</div>
                            <div class="text-center">Feb 10-16</div>
                            <div class="text-center">Feb 17-23</div>
                            <div class="text-center">Feb 24-Mar 2</div>
                        </div>

                        <!-- Today Indicator -->
                        <div class="relative mt-2">
                            <div class="absolute left-1/4 top-0 w-0.5 h-4 bg-error" title="Today: Jan 15, 2025"></div>
                        </div>
                    </div>

                    <!-- Gantt Chart Content -->
                    <div class="overflow-y-auto" style="max-height: calc(100vh - 280px);">
                        <!-- Capability Timeline 1 -->
                        <div class="gantt-row border-b border-light hover:bg-secondary-50 transition-fast" data-capability="customer-portal">
                            <div class="p-4">
                                <div class="grid grid-cols-8 gap-2 h-8 items-center">
                                    <!-- Requirements Phase -->
                                    <div class="relative">
                                        <div class="bg-secondary-400 rounded h-4 w-3/4" title="Requirements: Jan 6-10" data-phase="requirements"></div>
                                    </div>
                                    <!-- Design Phase -->
                                    <div class="relative">
                                        <div class="bg-secondary-300 rounded h-4 w-full" title="Design: Jan 13-19" data-phase="design"></div>
                                    </div>
                                    <!-- Development Phase -->
                                    <div class="relative">
                                        <div class="bg-primary rounded h-4 w-full" title="Development: Jan 20-Feb 2" data-phase="development"></div>
                                    </div>
                                    <div class="relative">
                                        <div class="bg-primary rounded h-4 w-1/2" title="Development: Jan 27-Feb 2" data-phase="development"></div>
                                    </div>
                                    <!-- CST Phase -->
                                    <div class="relative">
                                        <div class="bg-accent rounded h-4 w-3/4" title="CST: Feb 3-7" data-phase="cst"></div>
                                    </div>
                                    <!-- UAT Phase -->
                                    <div class="relative">
                                        <div class="bg-warning rounded h-4 w-full" title="UAT: Feb 10-16" data-phase="uat"></div>
                                    </div>
                                    <div></div>
                                    <div></div>
                                </div>
                            </div>
                        </div>

                        <!-- Capability Timeline 2 -->
                        <div class="gantt-row border-b border-light hover:bg-secondary-50 transition-fast" data-capability="api-integration">
                            <div class="p-4">
                                <div class="grid grid-cols-8 gap-2 h-8 items-center">
                                    <div></div>
                                    <!-- Design Phase -->
                                    <div class="relative">
                                        <div class="bg-secondary-300 rounded h-4 w-1/2" title="Design: Jan 15-17" data-phase="design"></div>
                                    </div>
                                    <!-- Development Phase -->
                                    <div class="relative">
                                        <div class="bg-primary rounded h-4 w-full" title="Development: Jan 20-26" data-phase="development"></div>
                                    </div>
                                    <div class="relative">
                                        <div class="bg-primary rounded h-4 w-1/4" title="Development: Jan 27-29" data-phase="development"></div>
                                    </div>
                                    <!-- CST Phase -->
                                    <div class="relative">
                                        <div class="bg-accent rounded h-4 w-full" title="CST: Feb 3-9" data-phase="cst"></div>
                                    </div>
                                    <!-- UAT Phase (At Risk) -->
                                    <div class="relative">
                                        <div class="bg-error rounded h-4 w-full border-2 border-error-100" title="UAT: Feb 10-16 (At Risk)" data-phase="uat"></div>
                                    </div>
                                    <div class="relative">
                                        <div class="bg-error rounded h-4 w-1/2 border-2 border-error-100" title="UAT: Feb 17-20 (At Risk)" data-phase="uat"></div>
                                    </div>
                                    <div></div>
                                </div>
                            </div>
                        </div>

                        <!-- Capability Timeline 3 -->
                        <div class="gantt-row border-b border-light hover:bg-secondary-50 transition-fast" data-capability="data-migration">
                            <div class="p-4">
                                <div class="grid grid-cols-8 gap-2 h-8 items-center">
                                    <!-- Requirements Phase -->
                                    <div class="relative">
                                        <div class="bg-secondary-400 rounded h-4 w-full" title="Requirements: Jan 6-12" data-phase="requirements"></div>
                                    </div>
                                    <!-- Design Phase -->
                                    <div class="relative">
                                        <div class="bg-secondary-300 rounded h-4 w-full" title="Design: Jan 13-19" data-phase="design"></div>
                                    </div>
                                    <div class="relative">
                                        <div class="bg-secondary-300 rounded h-4 w-1/2" title="Design: Jan 20-23" data-phase="design"></div>
                                    </div>
                                    <!-- Development Phase -->
                                    <div class="relative">
                                        <div class="bg-primary rounded h-4 w-3/4" title="Development: Jan 29-Feb 2" data-phase="development"></div>
                                    </div>
                                    <div class="relative">
                                        <div class="bg-primary rounded h-4 w-full" title="Development: Feb 3-9" data-phase="development"></div>
                                    </div>
                                    <!-- CST Phase -->
                                    <div class="relative">
                                        <div class="bg-accent rounded h-4 w-3/4" title="CST: Feb 12-15" data-phase="cst"></div>
                                    </div>
                                    <div></div>
                                    <div></div>
                                </div>
                            </div>
                        </div>

                        <!-- Capability Timeline 4 -->
                        <div class="gantt-row border-b border-light hover:bg-secondary-50 transition-fast" data-capability="security-framework">
                            <div class="p-4">
                                <div class="grid grid-cols-8 gap-2 h-8 items-center">
                                    <div></div>
                                    <!-- Requirements Phase -->
                                    <div class="relative">
                                        <div class="bg-secondary-400 rounded h-4 w-full" title="Requirements: Jan 13-19" data-phase="requirements"></div>
                                    </div>
                                    <div class="relative">
                                        <div class="bg-secondary-400 rounded h-4 w-1/4" title="Requirements: Jan 20-22" data-phase="requirements"></div>
                                    </div>
                                    <!-- Design Phase -->
                                    <div class="relative">
                                        <div class="bg-secondary-300 rounded h-4 w-full" title="Design: Jan 27-Feb 2" data-phase="design"></div>
                                    </div>
                                    <div class="relative">
                                        <div class="bg-secondary-300 rounded h-4 w-1/2" title="Design: Feb 3-6" data-phase="design"></div>
                                    </div>
                                    <!-- Development Phase -->
                                    <div class="relative">
                                        <div class="bg-primary rounded h-4 w-3/4" title="Development: Feb 12-15" data-phase="development"></div>
                                    </div>
                                    <div class="relative">
                                        <div class="bg-primary rounded h-4 w-full" title="Development: Feb 17-23" data-phase="development"></div>
                                    </div>
                                    <div class="relative">
                                        <div class="bg-primary rounded h-4 w-1/4" title="Development: Feb 24-26" data-phase="development"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Capability Timeline 5 -->
                        <div class="gantt-row border-b border-light hover:bg-secondary-50 transition-fast" data-capability="notification-system">
                            <div class="p-4">
                                <div class="grid grid-cols-8 gap-2 h-8 items-center">
                                    <div></div>
                                    <div></div>
                                    <!-- Development Phase -->
                                    <div class="relative">
                                        <div class="bg-primary rounded h-4 w-3/4" title="Development: Jan 22-26" data-phase="development"></div>
                                    </div>
                                    <div class="relative">
                                        <div class="bg-primary rounded h-4 w-full" title="Development: Jan 27-Feb 2" data-phase="development"></div>
                                    </div>
                                    <!-- CST Phase (Delayed) -->
                                    <div class="relative">
                                        <div class="bg-error rounded h-4 w-1/2 border-2 border-error-100" title="CST: Feb 5-7 (Delayed)" data-phase="cst"></div>
                                    </div>
                                    <div class="relative">
                                        <div class="bg-error rounded h-4 w-full border-2 border-error-100" title="CST: Feb 10-16 (Delayed)" data-phase="cst"></div>
                                    </div>
                                    <!-- UAT Phase -->
                                    <div class="relative">
                                        <div class="bg-warning rounded h-4 w-3/4" title="UAT: Feb 19-22" data-phase="uat"></div>
                                    </div>
                                    <div></div>
                                </div>
                            </div>
                        </div>

                        <!-- Capability Timeline 6 -->
                        <div class="gantt-row border-b border-light hover:bg-secondary-50 transition-fast" data-capability="reporting-dashboard">
                            <div class="p-4">
                                <div class="grid grid-cols-8 gap-2 h-8 items-center">
                                    <!-- Completed Project -->
                                    <div class="relative">
                                        <div class="bg-accent rounded h-4 w-full opacity-75" title="Completed: Jan 6-12" data-phase="completed"></div>
                                    </div>
                                    <div class="relative">
                                        <div class="bg-accent rounded h-4 w-1/2 opacity-75" title="Completed: Jan 13-16" data-phase="completed"></div>
                                    </div>
                                    <div></div>
                                    <div></div>
                                    <div></div>
                                    <div></div>
                                    <div></div>
                                    <div></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Legend -->
                    <div class="p-4 border-t border-light bg-secondary-50">
                        <div class="flex flex-wrap items-center justify-between">
                            <div class="flex flex-wrap items-center space-x-6 text-xs">
                                <div class="flex items-center space-x-2">
                                    <div class="w-3 h-3 bg-secondary-400 rounded"></div>
                                    <span class="text-text-secondary">Requirements</span>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <div class="w-3 h-3 bg-secondary-300 rounded"></div>
                                    <span class="text-text-secondary">Design</span>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <div class="w-3 h-3 bg-primary rounded"></div>
                                    <span class="text-text-secondary">Development</span>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <div class="w-3 h-3 bg-accent rounded"></div>
                                    <span class="text-text-secondary">CST</span>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <div class="w-3 h-3 bg-warning rounded"></div>
                                    <span class="text-text-secondary">UAT</span>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <div class="w-3 h-3 bg-success rounded"></div>
                                    <span class="text-text-secondary">Completed</span>
                                </div>
                            </div>
                            
                            <div class="flex items-center space-x-4 text-xs text-text-secondary">
                                <span>Stage Progress Visualization</span>
                                <button class="text-primary hover:text-primary-700 transition-fast" id="toggleCriticalPath">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Tooltip for Gantt Bars -->
    <div id="ganttTooltip" class="fixed bg-secondary-900 text-white text-xs rounded-lg px-3 py-2 pointer-events-none opacity-0 transition-fast z-50 shadow-modal">
        <div id="tooltipContent"></div>
    </div>

    <!-- Confirmation Dialog for Date Changes -->
    <div id="confirmDialog" class="fixed inset-0 bg-secondary-900 bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="card p-6 max-w-md mx-4 spring-in">
            <h3 class="text-lg font-semibold text-text-primary mb-4">Confirm Date Change</h3>
            <p class="text-text-secondary mb-6">Are you sure you want to update the timeline for this capability? This will create a new plan version.</p>
            <div class="flex items-center justify-end space-x-3">
                <button class="btn-secondary" id="cancelChange">Cancel</button>
                <button class="btn-primary" id="confirmChange">Confirm</button>
            </div>
        </div>
    </div>

    <script>
// /home/ubuntu/app/it_project_timeline_tracker/pages/gantt_view.html
// Enhanced JavaScript functionality for Gantt View

// Mobile menu toggle
document.getElementById('mobileMenuBtn').addEventListener('click', function() {
    const mobileMenu = document.getElementById('mobileMenu');
    mobileMenu.classList.toggle('hidden');
});

// Global variables for view state
let currentView = 'weeks';
let currentZoomLevel = 1;
let filteredData = [];

// View toggle functionality - FIXED
const viewButtons = document.querySelectorAll('#weekView, #monthView, #quarterView');
viewButtons.forEach(button => {
    button.addEventListener('click', function() {
        // Update button states
        viewButtons.forEach(btn => {
            btn.classList.remove('bg-primary', 'text-white');
            btn.classList.add('text-text-secondary');
        });
        this.classList.add('bg-primary', 'text-white');
        this.classList.remove('text-text-secondary');
        
        // Update current view
        currentView = this.id.replace('View', 's');
        
        // Update the timeline view
        updateTimelineView();
    });
});

function updateTimelineView() {
    const timelineHeader = document.querySelector('.grid.grid-cols-8.gap-2.text-xs.text-text-secondary.font-medium');
    const dateHeaders = timelineHeader.nextElementSibling;
    
    if (currentView === 'weeks') {
        timelineHeader.innerHTML = `
            <div class="text-center py-2">Week 1</div>
            <div class="text-center py-2">Week 2</div>
            <div class="text-center py-2">Week 3</div>
            <div class="text-center py-2">Week 4</div>
            <div class="text-center py-2">Week 5</div>
            <div class="text-center py-2">Week 6</div>
            <div class="text-center py-2">Week 7</div>
            <div class="text-center py-2">Week 8</div>
        `;
        dateHeaders.innerHTML = `
            <div class="text-center">Jan 6-12</div>
            <div class="text-center">Jan 13-19</div>
            <div class="text-center">Jan 20-26</div>
            <div class="text-center">Jan 27-Feb 2</div>
            <div class="text-center">Feb 3-9</div>
            <div class="text-center">Feb 10-16</div>
            <div class="text-center">Feb 17-23</div>
            <div class="text-center">Feb 24-Mar 2</div>
        `;
    } else if (currentView === 'months') {
        timelineHeader.innerHTML = `
            <div class="text-center py-2 col-span-2">January 2025</div>
            <div class="text-center py-2 col-span-2">February 2025</div>
            <div class="text-center py-2 col-span-2">March 2025</div>
            <div class="text-center py-2 col-span-2">April 2025</div>
        `;
        dateHeaders.innerHTML = `
            <div class="text-center col-span-2">Q1 Month 1</div>
            <div class="text-center col-span-2">Q1 Month 2</div>
            <div class="text-center col-span-2">Q1 Month 3</div>
            <div class="text-center col-span-2">Q2 Month 1</div>
        `;
    } else if (currentView === 'quarters') {
        timelineHeader.innerHTML = `
            <div class="text-center py-2 col-span-4">Q1 2025</div>
            <div class="text-center py-2 col-span-4">Q2 2025</div>
        `;
        dateHeaders.innerHTML = `
            <div class="text-center col-span-4">Jan - Mar</div>
            <div class="text-center col-span-4">Apr - Jun</div>
        `;
    }
}

// Enhanced Filter functionality - FIXED
document.getElementById('workstreamFilter').addEventListener('change', function() {
    applyFilters();
});

document.getElementById('statusFilter').addEventListener('change', function() {
    applyFilters();
});

document.getElementById('dateRangeFilter').addEventListener('change', function() {
    applyFilters();
});

function applyFilters() {
    const workstreamFilter = document.getElementById('workstreamFilter').value.toLowerCase();
    const statusFilter = document.getElementById('statusFilter').value.toLowerCase();
    const dateRangeFilter = document.getElementById('dateRangeFilter').value;
    
    const capabilityRows = document.querySelectorAll('.capability-row');
    const ganttRows = document.querySelectorAll('.gantt-row');
    
    capabilityRows.forEach((row, index) => {
        const workstream = row.querySelector('p:nth-child(2)').textContent.toLowerCase();
        const status = row.querySelector('.status-warning, .status-success, .status-error').textContent.toLowerCase();
        
        const workstreamMatch = !workstreamFilter || workstream.includes(workstreamFilter);
        const statusMatch = !statusFilter || status.includes(statusFilter);
        const dateRangeMatch = true; // Implement date range logic as needed
        
        if (workstreamMatch && statusMatch && dateRangeMatch) {
            row.style.display = '';
            if (ganttRows[index]) ganttRows[index].style.display = '';
        } else {
            row.style.display = 'none';
            if (ganttRows[index]) ganttRows[index].style.display = 'none';
        }
    });
}

// Zoom functionality - FIXED
document.getElementById('zoomIn').addEventListener('click', function() {
    if (currentZoomLevel < 3) {
        currentZoomLevel += 0.25;
        applyZoom();
    }
});

document.getElementById('zoomOut').addEventListener('click', function() {
    if (currentZoomLevel > 0.5) {
        currentZoomLevel -= 0.25;
        applyZoom();
    }
});

function applyZoom() {
    const ganttContent = document.querySelector('.col-span-9');
    ganttContent.style.transform = `scale(${currentZoomLevel})`;
    ganttContent.style.transformOrigin = 'top left';
    
    // Update container to prevent overflow
    const container = ganttContent.parentElement;
    container.style.overflow = 'auto';
}

// Synchronized scrolling - FIXED
const capabilitiesList = document.querySelector('.col-span-3 .overflow-y-auto');
const ganttChart = document.querySelector('.col-span-9 .overflow-y-auto');

if (capabilitiesList && ganttChart) {
    capabilitiesList.addEventListener('scroll', function() {
        ganttChart.scrollTop = this.scrollTop;
    });
    
    ganttChart.addEventListener('scroll', function() {
        capabilitiesList.scrollTop = this.scrollTop;
    });
}

// Enhanced Export functionality - FIXED
document.getElementById('exportBtn').addEventListener('click', function() {
    // Show export options
    const exportOptions = [
        { text: 'Export as PNG', action: () => exportAsPNG() },
        { text: 'Export as PDF', action: () => exportAsPDF() },
        { text: 'Export as CSV', action: () => exportAsCSV() },
        { text: 'Export Filtered Data', action: () => exportFilteredData() }
    ];
    
    // Create a simple dropdown menu
    const menu = document.createElement('div');
    menu.className = 'absolute bg-white border border-gray-200 rounded-lg shadow-lg z-50 py-2';
    menu.style.top = this.offsetTop + this.offsetHeight + 'px';
    menu.style.left = this.offsetLeft + 'px';
    
    exportOptions.forEach(option => {
        const item = document.createElement('button');
        item.className = 'block w-full text-left px-4 py-2 hover:bg-gray-100 transition-fast';
        item.textContent = option.text;
        item.addEventListener('click', () => {
            option.action();
            menu.remove();
        });
        menu.appendChild(item);
    });
    
    // Remove existing menu if any
    const existingMenu = document.querySelector('.absolute.bg-white.border');
    if (existingMenu) existingMenu.remove();
    
    // Add to DOM
    this.parentElement.style.position = 'relative';
    this.parentElement.appendChild(menu);
    
    // Remove menu when clicking outside
    setTimeout(() => {
        document.addEventListener('click', function removeMenu(e) {
            if (!menu.contains(e.target)) {
                menu.remove();
                document.removeEventListener('click', removeMenu);
            }
        });
    }, 100);
});

function exportAsPNG() {
    // Simple implementation using html2canvas (would need to include library)
    alert('PNG export functionality would require html2canvas library. Implementing CSV export instead.');
    exportAsCSV();
}

function exportAsPDF() {
    // Simple implementation using jsPDF (would need to include library)
    alert('PDF export functionality would require jsPDF library. Implementing CSV export instead.');
    exportAsCSV();
}

function exportAsCSV() {
    const data = [];
    data.push(['Capability', 'Lead', 'Workstream', 'Status', 'Phase', 'Progress']);
    
    const visibleRows = document.querySelectorAll('.capability-row:not([style*="display: none"])');
    visibleRows.forEach(row => {
        const capability = row.querySelector('h4').textContent;
        const lead = row.querySelector('p .font-medium:nth-child(2)').textContent;
        const workstream = row.querySelector('p:nth-child(2) .font-medium:nth-child(2)').textContent;
        const status = row.querySelector('span').textContent;
        const phase = row.querySelector('.flex .text-xs').textContent;
        
        data.push([capability, lead, workstream, status, phase, '']);
    });
    
    const csv = data.map(row => row.map(cell => `"${cell}"`).join(',')).join('\n');
    const blob = new Blob([csv], { type: 'text/csv' });
    const url = window.URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'gantt_data_' + new Date().toISOString().split('T')[0] + '.csv';
    a.click();
    window.URL.revokeObjectURL(url);
}

function exportFilteredData() {
    exportAsCSV(); // Same as CSV for now, but only visible rows
}

// Refresh data - FIXED
document.getElementById('refreshBtn').addEventListener('click', function() {
    this.innerHTML = '<svg class="w-4 h-4 mr-2 inline animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/></svg>Refreshing...';
    
    // Simulate data refresh
    setTimeout(() => {
        // Reset filters
        document.getElementById('workstreamFilter').value = '';
        document.getElementById('statusFilter').value = '';
        document.getElementById('dateRangeFilter').value = 'current-quarter';
        
        // Show all rows
        document.querySelectorAll('.capability-row, .gantt-row').forEach(row => {
            row.style.display = '';
        });
        
        this.innerHTML = '<svg class="w-4 h-4 mr-2 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/></svg>Refresh Data';
    }, 2000);
});

// Remove at-risk styling from gantt bars and use only stage colors
document.querySelectorAll('[data-phase]').forEach(bar => {
    // Remove any border styling that indicates at-risk status
    bar.classList.remove('border-2', 'border-error-100');
    bar.style.border = 'none';
    
    // Update colors to only represent stages
    const phase = bar.getAttribute('data-phase');
    switch (phase) {
        case 'requirements':
            bar.className = bar.className.replace(/bg-\w+-\d+/, 'bg-secondary-400');
            break;
        case 'design':
            bar.className = bar.className.replace(/bg-\w+-\d+/, 'bg-secondary-300');
            break;
        case 'development':
            bar.className = bar.className.replace(/bg-\w+-\d+/, 'bg-primary');
            break;
        case 'cst':
            bar.className = bar.className.replace(/bg-\w+-\d+/, 'bg-accent');
            break;
        case 'uat':
            bar.className = bar.className.replace(/bg-\w+-\d+/, 'bg-warning');
            break;
        case 'completed':
            bar.className = bar.className.replace(/bg-\w+-\d+/, 'bg-success');
            break;
    }
});

// Enhanced Gantt bar hover effects and tooltips
const tooltip = document.getElementById('ganttTooltip');
const tooltipContent = document.getElementById('tooltipContent');

document.querySelectorAll('[data-phase]').forEach(bar => {
    bar.addEventListener('mouseenter', function(e) {
        const title = this.getAttribute('title');
        const phase = this.getAttribute('data-phase');
        
        tooltipContent.innerHTML = `
            <div class="font-medium">${phase.charAt(0).toUpperCase() + phase.slice(1)} Phase</div>
            <div class="text-xs opacity-75">${title.replace(' (At Risk)', '').replace(' (Delayed)', '')}</div>
        `;
        
        tooltip.style.left = e.pageX + 10 + 'px';
        tooltip.style.top = e.pageY - 10 + 'px';
        tooltip.classList.remove('opacity-0');
        tooltip.classList.add('opacity-100');
        
        // Add hover effect
        this.style.transform = 'scaleY(1.2)';
        this.style.transition = 'transform 150ms ease-out';
    });
    
    bar.addEventListener('mouseleave', function() {
        tooltip.classList.remove('opacity-100');
        tooltip.classList.add('opacity-0');
        
        // Remove hover effect
        this.style.transform = 'scaleY(1)';
    });
    
    bar.addEventListener('mousemove', function(e) {
        tooltip.style.left = e.pageX + 10 + 'px';
        tooltip.style.top = e.pageY - 10 + 'px';
    });
});

// Enhanced capability row highlighting
document.querySelectorAll('.capability-row').forEach((row, index) => {
    row.addEventListener('mouseenter', function() {
        const ganttRows = document.querySelectorAll('.gantt-row');
        if (ganttRows[index]) {
            ganttRows[index].classList.add('bg-primary-50');
        }
    });
    
    row.addEventListener('mouseleave', function() {
        const ganttRows = document.querySelectorAll('.gantt-row');
        if (ganttRows[index]) {
            ganttRows[index].classList.remove('bg-primary-50');
        }
    });
});

// Enhanced gantt row highlighting
document.querySelectorAll('.gantt-row').forEach((row, index) => {
    row.addEventListener('mouseenter', function() {
        const capabilityRows = document.querySelectorAll('.capability-row');
        if (capabilityRows[index]) {
            capabilityRows[index].classList.add('bg-primary-50');
        }
    });
    
    row.addEventListener('mouseleave', function() {
        const capabilityRows = document.querySelectorAll('.capability-row');
        if (capabilityRows[index]) {
            capabilityRows[index].classList.remove('bg-primary-50');
        }
    });
});

// Critical path toggle - FIXED
document.getElementById('toggleCriticalPath').addEventListener('click', function() {
    const criticalPath = document.querySelectorAll('[data-critical="true"]');
    const isHighlighted = criticalPath.length > 0 && criticalPath[0].classList.contains('ring-2');
    
    if (isHighlighted) {
        // Remove critical path highlighting
        document.querySelectorAll('[data-phase]').forEach(bar => {
            bar.classList.remove('ring-2', 'ring-primary', 'ring-opacity-75');
            bar.removeAttribute('data-critical');
        });
    } else {
        // Add critical path highlighting to development and uat phases
        document.querySelectorAll('[data-phase="development"], [data-phase="uat"]').forEach(bar => {
            bar.classList.add('ring-2', 'ring-primary', 'ring-opacity-75');
            bar.setAttribute('data-critical', 'true');
        });
    }
});

// Drag and drop for date adjustments - ENHANCED
document.querySelectorAll('[data-phase]').forEach(bar => {
    bar.addEventListener('click', function() {
        const confirmDialog = document.getElementById('confirmDialog');
        confirmDialog.classList.remove('hidden');
        
        document.getElementById('confirmChange').onclick = function() {
            confirmDialog.classList.add('hidden');
            console.log('Date change confirmed');
            // Implement actual date change logic here
        };
        
        document.getElementById('cancelChange').onclick = function() {
            confirmDialog.classList.add('hidden');
        };
    });
});

// Capability row click navigation - ENHANCED
document.querySelectorAll('.capability-row').forEach(row => {
    row.addEventListener('click', function() {
        const capability = this.getAttribute('data-capability');
        // Add highlighting to show selection
        document.querySelectorAll('.capability-row').forEach(r => r.classList.remove('bg-blue-50'));
        this.classList.add('bg-blue-50');
        
        // Navigate after short delay to show selection
        setTimeout(() => {
            window.location.href = `capabilities_management.html?capability=${capability}`;
        }, 200);
    });
});

// Real-time updates simulation - ENHANCED
setInterval(() => {
    if (Math.random() > 0.98) {
        // Simulate progress updates
        const progressBars = document.querySelectorAll('[data-phase="development"], [data-phase="cst"], [data-phase="uat"]');
        if (progressBars.length > 0) {
            const randomBar = progressBars[Math.floor(Math.random() * progressBars.length)];
            randomBar.classList.add('animate-pulse');
            setTimeout(() => {
                randomBar.classList.remove('animate-pulse');
            }, 1000);
        }
    }
}, 3000);

// Initialize view
document.addEventListener('DOMContentLoaded', function() {
    updateTimelineView();
});
    </script>
<script id="dhws-dataInjector" src="../public/dhws-data-injector.js"></script>
<script id="dhws-elementInspector" src="../public/dhws-web-inspector.js"></script>
<script id="dhws-errorTracker" src="../public/dhws-error-tracker.js"></script>
</body>
</html>