<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plan Creation - IT Project Timeline Tracker</title>
    <link rel="stylesheet" href="../css/main.css">
</head>
<body class="bg-background min-h-screen">
    <!-- Global Header Navigation -->
    <header class="bg-surface border-b border-light shadow-card fixed top-0 left-0 right-0 z-50">
        <div class="max-w-7xl mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <!-- Logo -->
                <div class="flex items-center space-x-3">
                    <svg class="w-8 h-8 text-primary" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 2L2 7v10c0 5.55 3.84 9.74 9 11 5.16-1.26 9-5.45 9-11V7l-10-5z"/>
                        <path d="M9 12l2 2 4-4" stroke="white" stroke-width="2" fill="none"/>
                    </svg>
                    <h1 class="text-xl font-semibold text-text-primary">IT Project Timeline Tracker</h1>
                </div>

                <!-- Desktop Navigation -->
                <nav class="hidden md:flex items-center space-x-8">
                    <a href="dashboard.html" class="text-text-secondary hover:text-primary transition-fast">Dashboard</a>
                    <a href="capabilities_management.html" class="text-primary font-medium border-b-2 border-primary pb-1">Capabilities</a>
                    <a href="gantt_view.html" class="text-text-secondary hover:text-primary transition-fast">Plans</a>
                    <a href="milestone_management.html" class="text-text-secondary hover:text-primary transition-fast">Milestone Management</a>
                </nav>

                <!-- Mobile Menu Button -->
                <button class="md:hidden p-2 rounded-lg hover:bg-secondary-100 transition-fast" id="mobileMenuBtn">
                    <svg class="w-6 h-6 text-text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                    </svg>
                </button>
            </div>

            <!-- Mobile Navigation Menu -->
            <div class="md:hidden mt-4 pb-4 border-t border-light hidden" id="mobileMenu">
                <nav class="flex flex-col space-y-3 pt-4">
                    <a href="dashboard.html" class="text-text-secondary hover:text-primary transition-fast px-2 py-1">Dashboard</a>
                    <a href="capabilities_management.html" class="text-primary font-medium px-2 py-1">Capabilities</a>
                    <a href="gantt_view.html" class="text-text-secondary hover:text-primary transition-fast px-2 py-1">Plans</a>
                    <a href="milestone_management.html" class="text-text-secondary hover:text-primary transition-fast px-2 py-1">Milestone Management</a>
                </nav>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="pt-20 px-6 max-w-7xl mx-auto">
        <!-- Breadcrumb Navigation -->
        <nav class="mb-6" aria-label="Breadcrumb">
            <ol class="flex items-center space-x-2 text-sm">
                <li>
                    <a href="capabilities_management.html" class="text-primary hover:text-primary-700 transition-fast">Capabilities</a>
                </li>
                <li class="text-text-secondary">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                    </svg>
                </li>
                <li>
                    <a href="capabilities_management.html" class="text-primary hover:text-primary-700 transition-fast">Customer Portal Enhancement</a>
                </li>
                <li class="text-text-secondary">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                    </svg>
                </li>
                <li class="text-text-secondary font-medium">Create Plan</li>
            </ol>
        </nav>

        <!-- Page Header -->
        <div class="mb-8">
            <h2 class="text-3xl font-semibold text-text-primary mb-2">Create Plan</h2>
            <p class="text-text-secondary">Build aspirational or implementation plan for Customer Portal Enhancement capability</p>
        </div>

        <!-- Main Content Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
            <!-- Plan Creation Form (Left Section - 8 cols) -->
            <div class="lg:col-span-8">
                <form id="planCreationForm" class="space-y-8">
                    <!-- Plan Type Selection -->
                    <div class="card p-6">
                        <h3 class="text-lg font-semibold text-text-primary mb-4">Plan Type</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <label class="relative cursor-pointer">
                                <input type="radio" name="planType" value="aspirational" class="sr-only peer" checked>
                                <div class="card p-4 border-2 border-light peer-checked:border-primary peer-checked:bg-primary-50 hover:border-primary-300 transition-fast">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-10 h-10 bg-primary-100 rounded-lg flex items-center justify-center">
                                            <svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
                                            </svg>
                                        </div>
                                        <div>
                                            <h4 class="font-medium text-text-primary">Aspirational Plan</h4>
                                            <p class="text-sm text-text-secondary">Complete project lifecycle with all phases</p>
                                        </div>
                                    </div>
                                </div>
                            </label>

                            <label class="relative cursor-pointer">
                                <input type="radio" name="planType" value="implementation" class="sr-only peer">
                                <div class="card p-4 border-2 border-light peer-checked:border-primary peer-checked:bg-primary-50 hover:border-primary-300 transition-fast">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-10 h-10 bg-accent-100 rounded-lg flex items-center justify-center">
                                            <svg class="w-5 h-5 text-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                                            </svg>
                                        </div>
                                        <div>
                                            <h4 class="font-medium text-text-primary">Implementation Plan</h4>
                                            <p class="text-sm text-text-secondary">Development, CST, and UAT phases only</p>
                                        </div>
                                    </div>
                                </div>
                            </label>
                        </div>
                    </div>

                    <!-- Milestone Associations -->
                    <div class="card p-6">
                        <h3 class="text-lg font-semibold text-text-primary mb-4">Milestone Associations</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <!-- Technical Milestone -->
                            <div>
                                <label class="block text-sm font-medium text-text-primary mb-2">Technical Milestone</label>
                                <select class="input-field w-full" id="technicalMilestone">
                                    <option value="">Select technical milestone</option>
                                    <option value="api-integration">API Integration Complete - Mar 15, 2025</option>
                                    <option value="security-framework">Security Framework Implementation - Apr 10, 2025</option>
                                    <option value="performance-optimization">Performance Optimization - May 5, 2025</option>
                                    <option value="system-integration">System Integration Testing - Jun 1, 2025</option>
                                </select>
                            </div>

                            <!-- Business Milestone -->
                            <div>
                                <label class="block text-sm font-medium text-text-primary mb-2">Business Milestone</label>
                                <select class="input-field w-full" id="businessMilestone">
                                    <option value="">Select business milestone</option>
                                    <option value="user-acceptance">User Acceptance Completion - Apr 20, 2025</option>
                                    <option value="go-live">Production Go-Live - May 15, 2025</option>
                                    <option value="business-validation">Business Process Validation - Jun 10, 2025</option>
                                    <option value="stakeholder-signoff">Stakeholder Sign-off - Jul 1, 2025</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Requirements Phase (Aspirational Only) -->
                    <div class="card p-6 aspirational-only">
                        <div class="flex items-center space-x-3 mb-4">
                            <div class="w-8 h-8 bg-secondary-100 rounded-lg flex items-center justify-center">
                                <svg class="w-4 h-4 text-secondary-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                                </svg>
                            </div>
                            <h3 class="text-lg font-semibold text-text-primary">Requirements Phase</h3>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-text-primary mb-2">Start Date</label>
                                <input type="date" class="input-field w-full" id="reqStartDate" value="2025-01-15">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-text-primary mb-2">End Date</label>
                                <input type="date" class="input-field w-full" id="reqEndDate" value="2025-02-10">
                            </div>
                        </div>
                        <div class="mt-4 p-3 bg-secondary-50 rounded-lg">
                            <p class="text-sm text-text-secondary">Duration: 26 days • Dependencies: Business requirements gathering, stakeholder interviews</p>
                        </div>
                    </div>

                    <!-- Design Phase (Aspirational Only) -->
                    <div class="card p-6 aspirational-only">
                        <div class="flex items-center space-x-3 mb-4">
                            <div class="w-8 h-8 bg-secondary-200 rounded-lg flex items-center justify-center">
                                <svg class="w-4 h-4 text-secondary-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM21 5a2 2 0 00-2-2h-4a2 2 0 00-2 2v12a4 4 0 004 4h4a2 2 0 002-2V5z"/>
                                </svg>
                            </div>
                            <h3 class="text-lg font-semibold text-text-primary">Design Phase</h3>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-text-primary mb-2">Start Date</label>
                                <input type="date" class="input-field w-full" id="designStartDate" value="2025-02-11">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-text-primary mb-2">End Date</label>
                                <input type="date" class="input-field w-full" id="designEndDate" value="2025-03-05">
                            </div>
                        </div>
                        <div class="mt-4 p-3 bg-secondary-50 rounded-lg">
                            <p class="text-sm text-text-secondary">Duration: 22 days • Dependencies: Requirements completion, technical architecture review</p>
                        </div>
                    </div>

                    <!-- Development Phase -->
                    <div class="card p-6">
                        <div class="flex items-center space-x-3 mb-4">
                            <div class="w-8 h-8 bg-primary-100 rounded-lg flex items-center justify-center">
                                <svg class="w-4 h-4 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"/>
                                </svg>
                            </div>
                            <h3 class="text-lg font-semibold text-text-primary">Development Phase</h3>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-text-primary mb-2">Start Date</label>
                                <input type="date" class="input-field w-full" id="devStartDate" value="2025-03-06">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-text-primary mb-2">End Date</label>
                                <input type="date" class="input-field w-full" id="devEndDate" value="2025-04-15">
                            </div>
                        </div>
                        <div class="mt-4 p-3 bg-primary-50 rounded-lg">
                            <p class="text-sm text-text-secondary">Duration: 40 days • Dependencies: Design approval, development environment setup</p>
                        </div>
                    </div>

                    <!-- CST Phase -->
                    <div class="card p-6">
                        <div class="flex items-center space-x-3 mb-4">
                            <div class="w-8 h-8 bg-accent-100 rounded-lg flex items-center justify-center">
                                <svg class="w-4 h-4 text-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                </svg>
                            </div>
                            <h3 class="text-lg font-semibold text-text-primary">CST Phase</h3>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-text-primary mb-2">Start Date</label>
                                <input type="date" class="input-field w-full" id="cstStartDate" value="2025-04-16">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-text-primary mb-2">End Date</label>
                                <input type="date" class="input-field w-full" id="cstEndDate" value="2025-05-05">
                            </div>
                        </div>
                        <div class="mt-4 p-3 bg-accent-50 rounded-lg">
                            <p class="text-sm text-text-secondary">Duration: 19 days • Dependencies: Development completion, test environment readiness</p>
                        </div>
                    </div>

                    <!-- UAT Phase -->
                    <div class="card p-6">
                        <div class="flex items-center space-x-3 mb-4">
                            <div class="w-8 h-8 bg-warning-100 rounded-lg flex items-center justify-center">
                                <svg class="w-4 h-4 text-warning" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                                </svg>
                            </div>
                            <h3 class="text-lg font-semibold text-text-primary">UAT Phase</h3>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-text-primary mb-2">Start Date</label>
                                <input type="date" class="input-field w-full" id="uatStartDate" value="2025-05-06">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-text-primary mb-2">End Date</label>
                                <input type="date" class="input-field w-full" id="uatEndDate" value="2025-05-25">
                            </div>
                        </div>
                        <div class="mt-4 p-3 bg-warning-50 rounded-lg">
                            <p class="text-sm text-text-secondary">Duration: 19 days • Dependencies: CST completion, user training, business readiness</p>
                        </div>
                    </div>

                    <!-- Form Actions -->
                    <div class="flex items-center justify-between pt-6 border-t border-light">
                        <a href="capabilities_management.html" class="btn-secondary">Cancel</a>
                        <div class="flex items-center space-x-4">
                            <button type="button" class="btn-secondary" id="validateBtn">Validate Plan</button>
                            <button type="submit" class="btn-primary">Create Plan</button>
                        </div>
                    </div>
                </form>
            </div>

            <!-- Capability Summary Sidebar (Right Section - 4 cols) -->
            <div class="lg:col-span-4">
                <div class="sticky top-24 space-y-6">
                    <!-- Capability Summary Card -->
                    <div class="card p-6">
                        <h3 class="text-lg font-semibold text-text-primary mb-4">Capability Summary</h3>
                        
                        <div class="space-y-4">
                            <div>
                                <label class="text-sm font-medium text-text-secondary">Name</label>
                                <p class="text-text-primary font-medium">Customer Portal Enhancement</p>
                            </div>

                            <div>
                                <label class="text-sm font-medium text-text-secondary">Workstream Lead</label>
                                <p class="text-text-primary">Sarah Chen</p>
                            </div>

                            <div>
                                <label class="text-sm font-medium text-text-secondary">Subject Matter Expert</label>
                                <p class="text-text-primary">Michael Rodriguez</p>
                            </div>

                            <div>
                                <label class="text-sm font-medium text-text-secondary">Business Analyst</label>
                                <p class="text-text-primary">Emma Thompson</p>
                            </div>

                            <div>
                                <label class="text-sm font-medium text-text-secondary">Status</label>
                                <span class="status-warning px-3 py-1 rounded-full text-sm font-medium">In Planning</span>
                            </div>

                            <div>
                                <label class="text-sm font-medium text-text-secondary">RAG Status</label>
                                <span class="status-success px-3 py-1 rounded-full text-sm font-medium">GREEN</span>
                            </div>
                        </div>

                        <div class="mt-6 pt-4 border-t border-light">
                            <a href="capabilities_management.html" class="text-primary text-sm font-medium hover:text-primary-700 transition-fast">View full details →</a>
                        </div>
                    </div>

                    <!-- Plan Validation Status -->
                    <div class="card p-6" id="validationCard" style="display: none;">
                        <h3 class="text-lg font-semibold text-text-primary mb-4">Plan Validation</h3>
                        <div id="validationResults" class="space-y-3">
                            <!-- Validation results will be populated here -->
                        </div>
                    </div>

                    <!-- Timeline Preview -->
                    <div class="card p-6">
                        <h3 class="text-lg font-semibold text-text-primary mb-4">Timeline Preview</h3>
                        
                        <div class="space-y-3" id="timelinePreview">
                            <div class="flex items-center space-x-3 p-2 rounded-lg bg-secondary-50">
                                <div class="w-3 h-3 bg-secondary-400 rounded-full"></div>
                                <div class="flex-1">
                                    <p class="text-sm font-medium text-text-primary">Requirements</p>
                                    <p class="text-xs text-text-secondary">Jan 15 - Feb 10, 2025</p>
                                </div>
                            </div>

                            <div class="flex items-center space-x-3 p-2 rounded-lg bg-secondary-50">
                                <div class="w-3 h-3 bg-secondary-300 rounded-full"></div>
                                <div class="flex-1">
                                    <p class="text-sm font-medium text-text-primary">Design</p>
                                    <p class="text-xs text-text-secondary">Feb 11 - Mar 5, 2025</p>
                                </div>
                            </div>

                            <div class="flex items-center space-x-3 p-2 rounded-lg bg-primary-50">
                                <div class="w-3 h-3 bg-primary rounded-full"></div>
                                <div class="flex-1">
                                    <p class="text-sm font-medium text-text-primary">Development</p>
                                    <p class="text-xs text-text-secondary">Mar 6 - Apr 15, 2025</p>
                                </div>
                            </div>

                            <div class="flex items-center space-x-3 p-2 rounded-lg bg-accent-50">
                                <div class="w-3 h-3 bg-accent rounded-full"></div>
                                <div class="flex-1">
                                    <p class="text-sm font-medium text-text-primary">CST</p>
                                    <p class="text-xs text-text-secondary">Apr 16 - May 5, 2025</p>
                                </div>
                            </div>

                            <div class="flex items-center space-x-3 p-2 rounded-lg bg-warning-50">
                                <div class="w-3 h-3 bg-warning rounded-full"></div>
                                <div class="flex-1">
                                    <p class="text-sm font-medium text-text-primary">UAT</p>
                                    <p class="text-xs text-text-secondary">May 6 - May 25, 2025</p>
                                </div>
                            </div>
                        </div>

                        <div class="mt-4 pt-4 border-t border-light">
                            <p class="text-sm text-text-secondary">Total Duration: <span class="font-medium text-text-primary">130 days</span></p>
                        </div>
                    </div>

                    <!-- Quick Actions -->
                    <div class="card p-6">
                        <h3 class="text-lg font-semibold text-text-primary mb-4">Quick Actions</h3>
                        
                        <div class="space-y-3">
                            <a href="milestone_management.html" class="block p-3 border border-light rounded-lg hover:border-primary hover:bg-primary-50 transition-fast">
                                <div class="flex items-center space-x-3">
                                    <svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                                    </svg>
                                    <span class="text-sm font-medium text-text-primary">Manage Milestones</span>
                                </div>
                            </a>

                            <a href="gantt_view.html" class="block p-3 border border-light rounded-lg hover:border-accent hover:bg-accent-50 transition-fast">
                                <div class="flex items-center space-x-3">
                                    <svg class="w-5 h-5 text-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                                    </svg>
                                    <span class="text-sm font-medium text-text-primary">View Gantt Chart</span>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        // Mobile menu toggle
        document.getElementById('mobileMenuBtn').addEventListener('click', function() {
            const mobileMenu = document.getElementById('mobileMenu');
            mobileMenu.classList.toggle('hidden');
        });

        // Plan type toggle functionality
        const planTypeRadios = document.querySelectorAll('input[name="planType"]');
        const aspirationalSections = document.querySelectorAll('.aspirational-only');

        function togglePlanSections() {
            const selectedType = document.querySelector('input[name="planType"]:checked').value;
            
            aspirationalSections.forEach(section => {
                if (selectedType === 'aspirational') {
                    section.style.display = 'block';
                    section.classList.add('fade-in');
                } else {
                    section.style.display = 'none';
                }
            });

            updateTimelinePreview();
        }

        planTypeRadios.forEach(radio => {
            radio.addEventListener('change', togglePlanSections);
        });

        // Date validation
        function validateDates() {
            const planType = document.querySelector('input[name="planType"]:checked').value;
            const validationResults = document.getElementById('validationResults');
            const validationCard = document.getElementById('validationCard');
            
            let errors = [];
            let warnings = [];

            // Get all date inputs
            const dates = {
                reqStart: document.getElementById('reqStartDate').value,
                reqEnd: document.getElementById('reqEndDate').value,
                designStart: document.getElementById('designStartDate').value,
                designEnd: document.getElementById('designEndDate').value,
                devStart: document.getElementById('devStartDate').value,
                devEnd: document.getElementById('devEndDate').value,
                cstStart: document.getElementById('cstStartDate').value,
                cstEnd: document.getElementById('cstEndDate').value,
                uatStart: document.getElementById('uatStartDate').value,
                uatEnd: document.getElementById('uatEndDate').value
            };

            // Validate date sequences
            if (planType === 'aspirational') {
                if (dates.reqStart && dates.reqEnd && dates.reqStart >= dates.reqEnd) {
                    errors.push('Requirements end date must be after start date');
                }
                if (dates.designStart && dates.designEnd && dates.designStart >= dates.designEnd) {
                    errors.push('Design end date must be after start date');
                }
                if (dates.reqEnd && dates.designStart && dates.reqEnd >= dates.designStart) {
                    errors.push('Design phase must start after requirements phase ends');
                }
                if (dates.designEnd && dates.devStart && dates.designEnd >= dates.devStart) {
                    errors.push('Development phase must start after design phase ends');
                }
            }

            if (dates.devStart && dates.devEnd && dates.devStart >= dates.devEnd) {
                errors.push('Development end date must be after start date');
            }
            if (dates.cstStart && dates.cstEnd && dates.cstStart >= dates.cstEnd) {
                errors.push('CST end date must be after start date');
            }
            if (dates.uatStart && dates.uatEnd && dates.uatStart >= dates.uatEnd) {
                errors.push('UAT end date must be after start date');
            }

            // Check phase sequences
            if (dates.devEnd && dates.cstStart && dates.devEnd >= dates.cstStart) {
                errors.push('CST phase must start after development phase ends');
            }
            if (dates.cstEnd && dates.uatStart && dates.cstEnd >= dates.uatStart) {
                errors.push('UAT phase must start after CST phase ends');
            }

            // Display validation results
            validationResults.innerHTML = '';
            
            if (errors.length > 0) {
                errors.forEach(error => {
                    const errorDiv = document.createElement('div');
                    errorDiv.className = 'flex items-center space-x-2 p-2 bg-error-50 rounded-lg';
                    errorDiv.innerHTML = `
                        <svg class="w-4 h-4 text-error flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                        <span class="text-sm text-error">${error}</span>
                    `;
                    validationResults.appendChild(errorDiv);
                });
            }

            if (warnings.length > 0) {
                warnings.forEach(warning => {
                    const warningDiv = document.createElement('div');
                    warningDiv.className = 'flex items-center space-x-2 p-2 bg-warning-50 rounded-lg';
                    warningDiv.innerHTML = `
                        <svg class="w-4 h-4 text-warning flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"/>
                        </svg>
                        <span class="text-sm text-warning">${warning}</span>
                    `;
                    validationResults.appendChild(warningDiv);
                });
            }

            if (errors.length === 0 && warnings.length === 0) {
                const successDiv = document.createElement('div');
                successDiv.className = 'flex items-center space-x-2 p-2 bg-success-50 rounded-lg';
                successDiv.innerHTML = `
                    <svg class="w-4 h-4 text-success flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                    </svg>
                    <span class="text-sm text-success">Plan validation successful</span>
                `;
                validationResults.appendChild(successDiv);
            }

            validationCard.style.display = 'block';
            validationCard.classList.add('fade-in');

            return errors.length === 0;
        }

        // Update timeline preview
        function updateTimelinePreview() {
            const planType = document.querySelector('input[name="planType"]:checked').value;
            const timelinePreview = document.getElementById('timelinePreview');
            
            // This would dynamically update based on the selected dates
            // For demo purposes, keeping static content
        }

        // Validate button click
        document.getElementById('validateBtn').addEventListener('click', validateDates);

        // Form submission
        document.getElementById('planCreationForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            if (validateDates()) {
                // Simulate plan creation
                alert('Plan created successfully! Version 1 has been saved.');
                window.location.href = 'capabilities_management.html';
            } else {
                alert('Please fix validation errors before creating the plan.');
            }
        });

        // Auto-update dates when previous phase dates change
        const dateInputs = document.querySelectorAll('input[type="date"]');
        dateInputs.forEach(input => {
            input.addEventListener('change', function() {
                updateTimelinePreview();
                
                // Auto-adjust subsequent phase start dates
                if (this.id.includes('End')) {
                    const nextPhaseStart = getNextPhaseStartInput(this.id);
                    if (nextPhaseStart && this.value) {
                        const nextDate = new Date(this.value);
                        nextDate.setDate(nextDate.getDate() + 1);
                        nextPhaseStart.value = nextDate.toISOString().split('T')[0];
                    }
                }
            });
        });

        function getNextPhaseStartInput(currentEndId) {
            const phaseMap = {
                'reqEndDate': 'designStartDate',
                'designEndDate': 'devStartDate',
                'devEndDate': 'cstStartDate',
                'cstEndDate': 'uatStartDate'
            };
            
            const nextId = phaseMap[currentEndId];
            return nextId ? document.getElementById(nextId) : null;
        }

        // Initialize
        togglePlanSections();
    </script>
<script id="dhws-dataInjector" src="../public/dhws-data-injector.js"></script>
<script id="dhws-elementInspector" src="../public/dhws-web-inspector.js"></script>
<script id="dhws-errorTracker" src="../public/dhws-error-tracker.js"></script>
</body>
</html>